{
	"params": {
		"appName": "Turbine",
		"appNameApi": "Turbine API",
		"appNameEngine": "Turbine Engine",
		"region": "us-east-1",
        "sqsIamId": "350421549183"
	},
	"args": [
		{
			"param": "version",
			"description": "Application version",
			"flag": "--app-version",
			"type": "string"
		}
	],
	"resources": [
		{
			"type": "AppVersion",
			"name": "turbine-app-eng-eb-version",
			"actions": [],
			"config": {
				"region": {"$ref": "params.region"},
				"ApplicationName": {"$ref": "params.appNameEngine"},
				"VersionLabel": "pb-archive"
			}
		},
		{
			"type": "EbEnvironment",
			"name": "turbine-engine-eb-env",
			"actions": ["createResource"],
			"config": {
				"applicationName": {"$ref": "params.appNameEngine"},
				"environmentName": {"$ref": "tmpl!turbine-engine-{{params.version}}"},
				"appVersion": {"$ref": "resources.turbine-app-eng-eb-version"},
				"region": {"$ref": "params.region"},
				"solutionStack": {
					"os": "64bit Amazon Linux",
					"stack": "PHP 5.5"
				},
				"tier": "Worker",
				"options": {
					"scaling": {
						"environmentType": "SingleInstance"
					},
					"instances": {
						"keyName": "turbine",
						"iamInstanceProfile": "Turbine-API",
						"instanceType": "t1.micro",
						"monitoringInterval": "1 minute",
						"securityGroups": "Lee Home,MLG Downtown,MLG Excelsior,Seth Home,Turbine"
					},
					"notifications": {
						"protocol": "email",
						"endpoint": "smiller@medialogicgroup.com"
					},
					"updates": {
						"rollingUpdateEnabled": "false"
					},
					"healthCheck": {
						"url": {"$ref": "tmpl!/alert-engine?key={{params.alertEngine.ingestKey}}"}
					},
					"phpContainer": {
						"document_root": "/public",
						"memory_limit": "256M",
						"allow_url_fopen": "true",
						"display_errors": "Off",
						"max_execution_time": "60"
					}
				}
			}
		}
	]
}